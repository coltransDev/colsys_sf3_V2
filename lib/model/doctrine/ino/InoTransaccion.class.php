<?php

/**
 * InoTransaccion
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 6508 2009-10-14 06:28:49Z jwage $
 */
class InoTransaccion extends BaseInoTransaccion
{
    private $parametro = null;

    public function getInoConceptoParametro(){
        if( !$this->parametro ){
            $this->parametro = Doctrine::getTable("InoConceptoParametro")
                                   ->createQuery("p")
                                   ->select("p.*")
                                   ->where("p.ca_idconcepto = ? AND p.ca_idccosto = ?", array($this->getCaIdconcepto(), $this->getCaIdccosto()) )
                                   ->fetchOne();
            
        }
        return $this->parametro;
    }



    public function getImpuestos(){
        $impuestos = array();
        $parametro = $this->getInoConceptoParametro();
        if( $parametro->getCaIva() ){
            $impuestos["iva"]["db"] = $this->getCaDb()*$parametro->getCaIva();
            $impuestos["iva"]["cr"] = $this->getCaCr()*$parametro->getCaIva();
        }else{
            $impuestos["iva"]["db"] = 0;
            $impuestos["iva"]["cr"] = 0;
        }
        return $impuestos;
    }
}