<?php

/**
 * Bloque
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    colmob
 * @subpackage model
 * @author     Gabriel Martinez Rojas
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Bloque extends BaseBloque {

    public function __toString() {
        return $this->getCaIdformulario(). " ."  . $this->getFormulario()->getCaTitulo(). " - " . $this->ca_id.' .'.$this->ca_titulo;
    }

    public function getQueryBloque() {
        $q = Doctrine_Query::create()
                ->from('bloque')
                ->orderBy('ca_idformulario, ca_id DESC');
        return $q;
    }

    /**
     *Funcion unicamente de prueba favor borrar al finalizar
     * @return type
     */
    public function getPrimeraPreguntaBloque($idBloque) {
        $q = Doctrine_Query::create()
                ->from('pregunta')
                ->where('ca_idbloque = ?', $idBloque);
        return $q->fetchOne();
    }

    public function getPreguntasOrdenadas($id_bloque) {
        $q = Doctrine_Query::create()
                ->from('pregunta')
                ->where('ca_idbloque = ?', $id_bloque)
                ->andWhere('ca_activo = ?', 1)
                ->orderBy('ca_orden ASC');
        return $q->execute();
    }
    
        public function getTodasPreguntasOrdenadas($id_bloque) {
        $q = Doctrine_Query::create()
                ->from('pregunta')
                ->where('ca_idbloque = ?', $id_bloque)
                ->orderBy('ca_orden ASC, ca_activo DESC');
        return $q->execute();
    }

    public static function getTextoBooleano($bool) {
        /*$textoOpciones_tipo = array("<span class=no>no</span>", '<span class=si>si</span>');
        $valoresOpciones_tipo = array(0, 1);
        $c = array_combine($valoresOpciones_tipo, $textoOpciones_tipo);
        return html_entity_decode($c[$idPregunta]);*/
        if($bool==1)
        return 'si';
        else
        return 'no';
    }

    public static function getTipoBloqueBooleano($bool) {
        if($bool==1)
        return 'si';
        else
        return 'no';
    }

    public static function getTipoBloque($bloque) {
        if($bloque==1)
        return 'servicios';
        else
        return 'normal';
    }

}
