<?php

/**
 * ControlEncuesta
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    symfony
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 6820 2009-11-30 17:27:49Z jwage $
 */
class ControlEncuesta extends BaseControlEncuesta
{
        public function getEncuesta($id_encuesta) {
        $q = Doctrine_Query::create()
                ->from('controlEncuesta')
                ->where('ca_id = ?', $id_encuesta)
                ->limit(1);
        return $q->fetchOne();
    }

        /**
     *
     * @param Doctrine_Query $q
     * @return <type> 
     */
    public static function contarEncuestasEnviadas($id_formulario) {
        $q = Doctrine_Query::create()
        ->from('Emails')
         ->where('ca_idcaso = ?', $id_formulario)
         ->andWhere('ca_tipo = ?','Encuesta')
        ->andWhere('ca_usuenvio = ?', 'Administrador')
        ->andWhere('ca_address != ?', 'gmartinez@coltrans.com.co');
        return $q->count();
    }
    
    
    /**
     *
     * @param Doctrine_Query $q
     * @return <type> 
     */
    public static function contarEncuestas($id_formulario) {
        $q = Doctrine_Query::create()
        ->from('controlEncuesta')
         ->where('ca_idformulario = ?', $id_formulario)
         ->andWhere('ca_tipo_contestador = ?', 1);
        return $q->count();
    }

      /**
     *
     * @param Doctrine_Query $q
     * @return <type>
     */
    public static function contarServicio(Doctrine_Query $q = null) {
        $q = Doctrine_Query::create()
        ->from('controlEncuesta')
         ->where('ca_idfornulario = ?', 1)
         ->andWhere('ca_tipo_contestador = ?', 1)
         ->andWhere('ca_tipo_contestador = ?', 1) ;
        return $q->count();
    }

    /*
                    case 1:
                    return "Importaciones aéreo";
                    break;
                case 2:
                    return "Importaciones marítimo";
                    break;
                case 3:
                    return "Exportaciones aéreo";
                    break;
                case 4:
                    return "Exportaciones marítimo";
*/

}
