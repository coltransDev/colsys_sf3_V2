<?php

/**
 * IdsEvaluacion
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 5845 2009-06-09 07:36:57Z jwage $
 */
class IdsEvaluacion extends BaseIdsEvaluacion
{
    /*
     * Promedia los resultados de la evaluacion
     */
    public function getCalificacion(){
        
        return round(Doctrine::getTable("IdsEvaluacionxCriterio")
                ->createQuery("e")                
                ->select("SUM(e.ca_valor*e.ca_ponderacion )/100")                
                ->addWhere("e.ca_idevaluacion = ?",$this->getCaIdevaluacion() )
                ->setHydrationMode(Doctrine::HYDRATE_SINGLE_SCALAR)
                ->execute(), 1 );

       /* $resultado = 0;
        $i = 0;

        $conceptos = $this->getIdsEvaluacionxCriterio();
        foreach( $conceptos as $concepto ){

                $resultado+=$concepto->getCaValor()*$concepto->getCaPonderacion();


            $i+=$concepto->getCaPonderacion();
        }
        if( $i==0 ){
            return 0;
        }else{
            return round($resultado/$i, 1);
        }*/

    }
}